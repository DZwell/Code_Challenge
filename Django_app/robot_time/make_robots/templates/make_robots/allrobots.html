{% load staticfiles %}

<link rel="stylesheet" type="text/css" href="{% static 'make_robots/style.css' %}" />
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">

<h1>{{ welcome }}</h1>

<head>
{% block content %}
    <div id="botlist">
    {% for robot in robots %}
        <form id="botlist" action="{% url 'delete_bot' %}" method="POST" enctype="multipart/form-data" target="_blank">
            {% csrf_token %}
            <input class="name" name="robot_name" value="{{ robot.name }}" hidden>
            <h3>{{ robot.name }}</h3>
            <ul>
                <input name="robot_strength" class="attributes" value="{{ robot.strength }}" type="number" hidden>Strength - {{ robot.strength }}
                </input><br>
                <input name="robot_agility" class="attributes" value="{{ robot.agility }}" type="number" hidden>Agility - {{ robot.agility }}
                </input><br>
                <input name="robot_armour" class="attributes" value="{{ robot.armour }}" type="number" hidden>Armour - {{ robot.armour }}
                </input><br>
            </ul>
            <button class="delete" type="submit" value="delete" name="delete_bot" id="Delete_{{ robot.name }}">Delete</button>
        </form>
        <form action="{% url 'edit_bot' %}" method="POST" enctype="multipart/form-data" target="_blank">
            <input type="button" class="edit" id="edit" value="Edit">
            <button class="save" id="save" type="submit" value="changed_bot" name="edit_bot" hidden>Save</button>
        </form>
    {% endfor %}
    </div>
    <div id="newbots">
        <form action="" method="POST">
        {% csrf_token %}
        {{ form.as_p }}

            <button type="submit" value="Robot">Submit</button>
        </form>

    </div>
{% endblock %}
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js">
</script>
<script>
    $(document).ready(function() {
        $('.edit').click(function(){
            $('.attributes').show();
            $('.save').show();
            $('.edit').hide();

            // Swap original edit button and Make another edit button that submits data and hides input fields.
        });
        var $form = $('form');
        $form.submit(function(){
          $.post($(this).attr('action'), $(this).serialize(), function(response){
                // do something here on success

          },'json');
        location.reload();
          return false;
       });
    });

</script>



